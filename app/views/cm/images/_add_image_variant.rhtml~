<% list_elem_id = "ImageVariantListElementAddID_0000" %>
<div id=<%=list_elem_id%> class="ImageVariantListElement">
  <p>Upload new image variant:</p>
  <% form_for :image, edit_image,
    :url => { :action => "update", :format => 'js' },
    :html => { :method => :put,
               :multipart => true,
               :target => "ImageVariantAddUploader" } do | add_image_variant_form | %>
    <%= hidden_field_tag 'update_type', 'add_image_variant' %>
    <div class="ImageVariantListElementProperties">
      <% new_image_variant = ImageVariant.new %>
      <% add_image_variant_form.fields_for :image_variants, new_image_variant do | iv_fields | %>
        <div class="ImageVariantListElementProp">Select image variant file:<%= iv_fields.file_field :file, :index => nil %></div>
      <% end %>
    </div>
    <div class="ImageVariantListElementSubmit">
      <%= submit_tag "> Upload image variant" %>
    </div>
  <% end %>
  <iframe src="/404.html" id="ImageVariantAddUploader" class="ImageVariantAddUploader" name="ImageVariantAddUploader">
    <script>alert("Hi, from iframe!")</script>
  </iframe>
  <div class="ImageVariantListElementDelete">
    <%= link_to_function "> delete image variant", "remove_field($(this), ('.ImageVariantListElement'))", :class => "NavLink" %>
  </div>
</div>
