<% master_variant = nil %>
<% web_default_variant = nil %>
<% thumbnail_variant = nil %>
<% if @image %>
  <% @image.image_variants.each do | image_variant | %>
    <% if image_variant.variant_type == 'M' %>
      <% master_variant = image_variant %>      
    <% elsif image_variant.variant_type == 'W' %>
      <% web_default_variant = image_variant %>
    <% elsif image_variant.variant_type == 'T' %>
      <% thumbnail_variant = image_variant %>      
    <% end %>
  <% end %>
<% end %>
<div class="ImageVariantList">
    <% if @image %>
        <div class="ArchiveListHeading">
	  <p>Image description : <%= @image.description %></p>
        </div>
        <% if master_variant %>
          <%= render :partial => "show_image_variant", :locals => { :image_variant => master_variant, :is_thumbnail => false } %>
        <% end %>
        <% if web_default_variant %>
          <%= render :partial => "show_image_variant", :locals => { :image_variant => web_default_variant, :is_thumbnail => false } %>
        <% end %>
        <% if thumbnail_variant %>
          <%= render :partial => "show_image_variant", :locals => { :image_variant => thumbnail_variant, :is_thumbnail => true } %>
        <% end %>
        <% @image.image_variants.each do | image_variant | %>
          <% if image_variant != thumbnail_variant and image_variant != master_variant and image_variant != web_default_variant %>
            <%= render :partial => "show_image_variant", :locals => { :image_variant => image_variant, :is_thumbnail => false } %>
          <% end %>
        <% end %>
    <% end %>
</div>
<div id="ArchiveMainImage" class="ArchiveMainImage">
    <% if web_default_variant %>
        <%= image_variant_tag web_default_variant %>
    <% end %>
</div>
